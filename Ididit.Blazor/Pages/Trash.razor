@page "/trash"

@using Ididit.Data.Models
@using Ididit.Services

@inject TrashService TrashService

<PageTitle>Trash</PageTitle>

<div class="col-auto mh-100 overflow-auto px-0 px-md-1">

    <div class="my-1">
        <button class="btn btn-primary" @onclick="TrashService.EmptyTrash">Empty trash</button>
    </div>

    @if (TrashService.Models is null)
    {
        <p>Loading...</p>
    }
    else
    {
        foreach (InfoModel model in TrashService.Models)
        {
            <div class="input-group flex-nowrap">
                <span class="input-group-text flex-grow-1 text-wrap">@model.Title</span>
                <button class="btn btn-outline-primary" @onclick="() => TrashService.Restore(model)">Restore</button>
                <button class="btn btn-outline-primary" @onclick="() => TrashService.Delete(model)"><i class="bi bi-trash"></i></button>
            </div>
        }
    }

</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        await TrashService.Initialize();
    }
}
